---
title: 494. ç›®æ ‡å’Œ
tags:
  - ç®—æ³•
  - åŠ¨æ€è§„åˆ’
  - èƒŒåŒ…é—®é¢˜å˜ç§
abbrlink: 9c78cf30
date: 2020-07-08 17:47:58
math: true
index_img: https://rmt.dogedoge.com/fetch/~/source/unsplash/photo-1484417894907-623942c8ee29
---

ä¸åŠ¨æ€è§„åˆ’ä½œæ–—äº‰-å…¶äºŒ

<!-- more -->

# é¢˜ç›®

ç»™å®šä¸€ä¸ª**éè´Ÿæ•´æ•°**æ•°ç»„ï¼Œa1, a2, ..., an, å’Œä¸€ä¸ªç›®æ ‡æ•°ï¼ŒSã€‚ç°åœ¨ä½ æœ‰ä¸¤ä¸ªç¬¦å· + å’Œ -ã€‚å¯¹äºæ•°ç»„ä¸­çš„ä»»æ„ä¸€ä¸ªæ•´æ•°ï¼Œä½ éƒ½å¯ä»¥ä» + æˆ– -ä¸­é€‰æ‹©ä¸€ä¸ªç¬¦å·æ·»åŠ åœ¨å‰é¢ã€‚

è¿”å›å¯ä»¥ä½¿æœ€ç»ˆæ•°ç»„å’Œä¸ºç›®æ ‡æ•° S çš„æ‰€æœ‰æ·»åŠ ç¬¦å·çš„æ–¹æ³•æ•°ã€‚

**ç¤ºä¾‹ï¼š**

**è¾“å…¥ï¼š**`nums: [1, 1, 1, 1, 1], S: 3`
**è¾“å‡ºï¼š**`5`
**è§£é‡Šï¼š**

> -1+1+1+1+1 = 3
> +1-1+1+1+1 = 3
> +1+1-1+1+1 = 3
> +1+1+1-1+1 = 3
> +1+1+1+1-1 = 3

ä¸€å…±æœ‰5ç§æ–¹æ³•è®©æœ€ç»ˆç›®æ ‡å’Œä¸º3ã€‚

**æç¤ºï¼š**

- æ•°ç»„éç©ºï¼Œä¸”é•¿åº¦ä¸ä¼šè¶…è¿‡ 20 ã€‚
- åˆå§‹çš„æ•°ç»„çš„å’Œä¸ä¼šè¶…è¿‡ 1000 ã€‚
- ä¿è¯è¿”å›çš„æœ€ç»ˆç»“æœèƒ½è¢« 32 ä½æ•´æ•°å­˜ä¸‹ã€‚

# ç†è§£

â€‹	ä¸€å¼€å§‹æˆ‘å°±æƒ³ç€æ˜¯ä¸æ˜¯ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢æˆ–è€…åŠ¨æ€è§„åˆ’æ¥åšï¼Œæˆ‘çœ‹äº†çœ‹é¢˜è§£ï¼Œå‘ç°å¤§éƒ¨åˆ†äººè¯´ä¼šè¶…æ—¶ï¼Œæœ€åè¿˜æ˜¯ç”¨åŠ¨æ€è§„åˆ’æ¥åšäº†ã€‚

â€‹	å‚è€ƒè¯„è®ºåŒºçš„å¤§ä½¬çš„è¯´æ³•ï¼šä¸€èˆ¬åœ°ï¼Œé—®é¢˜å¦‚æœæ˜¯ä»ä¸€ä¸ªæ•°ç»„é‡Œé¢é€‰æ‹©ä¸€äº›æ•°å­—æ¥ç»„åˆæˆä¸€ä¸ªæ•°ï¼Œå°±å¯ä»¥åŒ–è§£æˆ**0-1èƒŒåŒ…é—®é¢˜**ã€‚

è¿™é“é¢˜é¢˜ç›®å¯ä»¥è½¬åŒ–ä¸ºï¼šæ‰¾åˆ°ç»™å®šæ•°ç»„çš„ä¸€ä¸ªæ­£å­é›†å’Œè´Ÿå­é›†ï¼Œä½¿å…¶çš„å’Œä¸º`target`
$$
\text{è®¾Pä¸ºæ­£å­é›†ï¼ŒNä¸ºè´Ÿå­é›†ï¼ŒUä¸ºæ•´ä¸ªæ•°ç»„ã€‚æœ‰ï¼š}\\
\Sigma{(P)}-\Sigma{(N)}=Target\\
\text{ä¸¤è¾¹åŒæ—¶åŠ ä¸Š}\Sigma{(P)}-\Sigma{(N)}:\\
\Sigma{(P)}+\Sigma{(P)}-\Sigma{(N)}+\Sigma{(N)} = Target+\Sigma{(U)}\\
\text{å³}	\\
2\cdot\Sigma{(P)}=Target+\Sigma{(U)}
$$

â€‹	å°±æ˜¯è¯´åœ¨ç»™å®šçš„æ•°ç»„é‡Œé¢æ‰¾åˆ°ä¸€äº›æ•°ï¼Œä»–ä»¬çš„å’Œçš„ä¸¤å€æ˜¯ç›®æ ‡æ•°å­—åŠ ä¸Šæ•´ä¸ªæ•°ç»„ä¹‹å’Œã€‚æ¢è¨€ä¹‹ï¼Œå¦‚æœç›®æ ‡æ•°å­—åŠ ä¸Šæ•´ä¸ªæ•°ç»„ä¹‹å’Œä¸æ˜¯ä¸ªå¶æ•°ï¼Œé‚£ä¹ˆå°±è‚¯å®šä¸å­˜åœ¨è¿™ä¸ªæ­£å­é›†ã€‚è¿™æ˜¯ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶ã€‚

â€‹	é‚£ä¹ˆæŒ‰ç…§åŠ¨æ€è§„åˆ’çš„æ€è·¯ï¼š

>- å®šçŠ¶æ€
>- æ‰¾åŸºæ€
>- å†™è½¬ç§»æ–¹ç¨‹

â€‹	æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥ï¼Œå…ˆæ˜¯å®šçŠ¶æ€ï¼Œå‰é¢æˆ‘ä»¬å·²ç»è®²è¿‡ï¼Œè¿™é“é¢˜å¯ä»¥è½¬æ¢ä¸ºèƒŒåŒ…é—®é¢˜æ¥è§£å†³ã€‚ä¸€æ ·çš„ï¼Œæˆ‘ä»¬çš„çŠ¶æ€å¯ä»¥ä¸º**é€‰å–æ•°çš„èŒƒå›´**ï¼ˆç‰©å“ï¼‰ä»¥åŠ**è¦å‡‘æˆçš„æ•°**ï¼ˆé‡é‡ï¼‰è¿™ä¸¤ç§ã€‚å¾ˆå®¹æ˜“çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„`dp[i][j]`æ¥è¡¨ç¤ºå¯¹äºç´¢å¼•`[0,i]`çš„æ•°ï¼Œæˆ‘ä»¬èƒ½å‡‘å‡º`j`çš„æ–¹æ³•æ•°é‡ã€‚

â€‹	çŠ¶æ€æˆ‘ä»¬æ˜ç¡®äº†ï¼Œé‚£ä¹ˆå°±æ¥æ‰¾æ‰¾æœ€åŸºç¡€çš„çŠ¶æ€äº†ï¼Œæ ¹æ®èƒŒåŒ…é—®é¢˜çš„ç»éªŒï¼Œ`dp[0][0]`çš„æ–¹æ³•æ•°é‡å§‹ç»ˆä¸º`1`ï¼Œå› ä¸ºé€‰æ‹©å‰`0`ä¸ªæ•°çš„æ—¶å€™ï¼Œåˆæˆ`0`çš„æ–¹æ³•æ°¸è¿œéƒ½æ˜¯`1`ï¼Œå³ä»€ä¹ˆéƒ½ä¸é€‰ã€‚

â€‹	æ¥ä¸‹æ¥å°±æ˜¯æˆ‘è§‰å¾—åŠ¨æ€è§„åˆ’æœ€è®©äººå¤´ç–¼çš„çŠ¶æ€è½¬ç§»äº†ï¼Œå¯¹äºå½“å‰çš„`nums[i]`ï¼Œæœ‰ä¸¤ç§é€‰æ‹©ï¼Œè¦ä¹ˆåŠ è¿›èƒŒåŒ…ï¼Œè¦ä¹ˆä¸åŠ è¿›å»ï¼Œç”±äºæˆ‘ä»¬æ˜¯è¦æ±‚æ–¹æ³•çš„æ•°é‡ï¼Œæ‰€ä»¥è¦æŠŠ`nums[i]`æ²¡æ”¾è¿›èƒŒåŒ…çš„æƒ…å†µçš„æ–¹æ³•æ•°é‡åŠ ä¸Šæ”¾è¿›èƒŒåŒ…çš„æƒ…å†µã€‚å¯¹äº`dp[i][j]`ï¼Œå®ƒçš„å€¼ç­‰äº:
$$
dp[i-1][j]+dp[i-1][j-nums[i]]\\
\text{æ²¡æ”¾è¿›å»}+\text{æ”¾è¿›å»äº†}
$$
è¿™å¼å­å¾ˆå¥½ç†è§£ï¼Œæ²¡æ”¾è¿›å»çš„è¯ï¼Œè‚¯å®šç»§æ‰¿äº†ä¸Šä¸€æ¬¡çš„æ•°é‡å˜›ï¼›æ”¾è¿›å»çš„è¯ï¼Œå°±è¦æ‰¾ä¸€æ‰¾ä¸Šä¸€æ¬¡**æ²¡åŠ ä¸Šè¿™ä¸ªæ•°**çš„æ—¶å€™çš„æ–¹æ³•æ•°é‡ã€‚

>æˆ‘çŸ¥é“æˆ‘è¿™äººæ²¡å¤šä¹…å°±ä¼šå¾ˆéš¾ç†è§£åé¢è¿™å¥è¯çš„æ„æ€ï¼Œæ‰€ä»¥è¶ç€æˆ‘ç°åœ¨å¤§æ¦‚èƒ½ç†è§£ï¼Œèµ¶ç´§è®²æ˜ç™½ï¼š
>
>æŠŠåé¢çš„é‚£ä¸ª`dp[i-1][j-nums[i]]`çš„`j`å½“åšç°åœ¨çš„èƒŒåŒ…çš„æ€»é‡é‡ï¼ˆå°±æ˜¯å·²ç»æŠŠ`nums[i]`è£…è¿›å»äº†ï¼‰ï¼Œé‚£ä¹ˆæˆ‘æƒ³çŸ¥é“ç°åœ¨èƒŒåŒ…çš„æ€»ä»·å€¼ï¼Œé‚£æˆ‘æ˜¯ä¸æ˜¯å¿…é¡»å¾—çŸ¥é“æ²¡è£…è¿™ä¸ªç‰©å“çš„æ—¶å€™ï¼Œæˆ‘çš„èƒŒåŒ…çš„æ€»ä»·å€¼ï¼Ÿ
>
>è¿™ä¸ªä¹ŸåŒç†å˜›ï¼Œæƒ³çŸ¥é“æˆ‘åŠ ä¸Šè¿™ä¸ªæ•°ï¼ˆ`nums[i]`)ä¹‹åä¸€å…±æœ‰å¤šå°‘ç§æ–¹æ³•åˆæˆå½“å‰çš„æ•°å­—(`j`ï¼‰ï¼Ÿé‚£æˆ‘èµ·ç å¾—çŸ¥é“æ²¡åŠ è¿›å»ï¼ˆ`dp[i-1][j-nums[i]]`ï¼‰çš„æ—¶å€™æœ‰å¤šå°‘ç§æ–¹æ³•å˜›ã€‚

# ä»£ç 

```java
class Solution {
    public int findTargetSumWays(int[] nums, int S) {
        int sum = 0;
        for (int num : nums) {
            sum += num;
        }
        if ((S + sum) % 2 != 0 || sum < Math.abs(S)) return 0;
        int val = (S + sum) / 2;
        int[] dp = new int[val + 1];
        dp[0] = 1;
        for (int num : nums) {
            for (int j = val; j >= num; j--) {
                dp[j] = dp[j] + dp[j - num];
            }
        }
        return dp[val];
    }
}
```

â€‹	é‚£ä¹ˆæˆ‘è¿™é‡Œä¸ºä»€ä¹ˆåªç”¨äº†ä¸€ä¸ªä¸€ç»´æ•°ç»„å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬è§‚å¯ŸçŠ¶æ€è½¬ç§»æ–¹ç¨‹å¯ä»¥çŸ¥é“ï¼šå½“å‰çŠ¶æ€éƒ½æ˜¯ä¸Šä¸€æ¬¡çŠ¶æ€è½¬ç§»è¿‡æ¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªä¸€ç»´æ•°ç»„ä¿å­˜æ•°æ®å°±å¯ä»¥äº†ã€‚å…¶ä¸­`dp[i-1][j]`å’Œä»£ç ä¸­å·¦ä¾§çš„`dp[j]`æ˜¯ä¸€æ ·çš„ï¼Œåœ¨ä¸ºå·¦è¾¹çš„`dp[j]`èµ‹å€¼çš„æ—¶å€™ï¼Œå³è¾¹çš„`dp[j]`è¿˜ä¿å­˜ç€ä¸Šä¸€æ¬¡å¾ªç¯çš„å€¼ï¼Œå¯¹å§ï¼Ÿ`dp[j-num]`ä¹ŸåŒç†ã€‚

â€‹	è¿˜æœ‰ï¼Œä¸ºä»€ä¹ˆè¦é€†åºï¼Ÿä¸ºäº†ç¡®ä¿å³è¾¹çš„`dp[j]`å’Œ`dp[j-num]`ä¿å­˜çš„è¿˜æ˜¯ä¹‹å‰çš„å€¼ï¼Œæ‹¿`dp[j-num]`æ¥è®²ï¼š

>è®¾`dp[10]`ç­‰äº`dp[10]+dp[10-4]`æ¥è®²ï¼Œå¦‚æœé¡ºåºæ›´æ–°ï¼Œé‚£æˆ‘`dp[6]`æ˜¯ä¸æ˜¯æ¯”`dp[10]`å…ˆæ›´æ–°ï¼Ÿè¿™å°±ä¸ç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚äº†å˜›

â€‹	è¿˜æœ‰ï¼Œä¸ºä»€ä¹ˆè¦ä»¥å½“å‰çš„`num[i]`ä½œä¸º`j`çš„ä¸‹é™å‘¢ï¼Ÿä½ æ€»æ²¡è§è¿‡è´Ÿæ•°çš„ç´¢å¼•å§ï¼Ÿå†µä¸”`j`å¯ä»¥çœ‹ä¸ºå½“å‰çš„èƒŒåŒ…å®¹é‡ï¼Œå¦‚æœèƒŒåŒ…å®¹é‡ä¸è¶³ä»¥è£…ä¸‹è¿™ä¸ªæ•°å­—ï¼Œé‚£è¿˜è£…ä¸ªğŸ”¨ã€‚